<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="Generator" content="iWeb 3.0.4" />
    <meta name="iWeb-Build" content="local-build-20130418" />
    <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />
    <meta name="viewport" content="width=700" />
    <title>￼</title>
    <link rel="stylesheet" type="text/css" media="screen,print" href="Configuration_files/Configuration.css" />
    <!--[if lt IE 8]><link rel='stylesheet' type='text/css' media='screen,print' href='Configuration_files/ConfigurationIE.css'/><![endif]-->
    <!--[if gte IE 8]><link rel='stylesheet' type='text/css' media='screen,print' href='Media/IE8.css'/><![endif]-->
    <script type="text/javascript" src="Scripts/iWebSite.js"></script>
    <script type="text/javascript" src="Scripts/Widgets/SharedResources/WidgetCommon.js"></script>
    <script type="text/javascript" src="Scripts/Widgets/Navbar/navbar.js"></script>
    <script type="text/javascript" src="Configuration_files/Configuration.js"></script>
  </head>
  <body style="background: rgb(101, 101, 101); margin: 0pt; " onload="onPageLoad();" onunload="onPageUnload();">
    <div style="text-align: center; ">
      <div style="margin-bottom: 10px; margin-left: auto; margin-right: auto; margin-top: 10px; overflow: hidden; position: relative; word-wrap: break-word;  background: rgb(255, 255, 255); text-align: left; width: 700px; " id="body_content">
        <div style="margin-left: 0px; position: relative; width: 700px; z-index: 0; " id="nav_layer">
          <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
          <div class="com-apple-iweb-widget-navbar flowDefining" id="widget0" style="margin-left: 20px; margin-top: 0px; opacity: 1.00; position: relative; width: 660px; z-index: 1; ">
    
            <div id="widget0-navbar" class="navbar">

      
              <div id="widget0-bg" class="navbar-bg">

        
                <ul id="widget0-navbar-list" class="navbar-list">
 <li></li> 
</ul>
                
      
</div>
              
    
</div>
          </div>
          <script type="text/javascript"><!--//--><![CDATA[//><!--
new NavBar('widget0', 'Scripts/Widgets/Navbar', 'Scripts/Widgets/SharedResources', '.', {"path-to-root": "", "navbar-css": ".navbar {\n\tfont-family: 'Helvetica Neue', Arial, sans-serif;\n\tfont-size: .8em;\n\tcolor: #666666;\n\tline-height: 30px;\n\tborder-bottom: 3px solid #ccc;\n}\n\n.navbar-bg {\n\ttext-align: right;}\n\n.navbar-bg ul {\n\tlist-style: none;\n\tmargin: 0px;\n\tpadding: 0px;\n}\n\n\nli {\n\tlist-style-type: none;\n\tdisplay: inline;\n\tpadding: 0px 5px 0px 0px;\n}\n\n\nli a {\n\ttext-decoration: none;\n\tpadding: 10px;\n\tcolor: #666666;\n\tfont-weight: bold;\n}\n\nli a:visited {\n\ttext-decoration: none;\n\tpadding: 10px;\n\tcolor: #666666;\n\tfont-weight: bold;\n}\n\nli a:hover\r{\r\n \tcolor: #999999;\n\ttext-decoration: none;\r}\n\n\nli.current-page a\r{\r\t color: #66ABC5;\n\ttext-decoration: none;\r}\n", "current-page-GUID": "85346840-8022-4F01-AA6C-560E554A4B68", "isCollectionPage": "NO"});
//--><!]]></script>
          <div style="clear: both; height: 0px; line-height: 0px; " class="spacer"> </div>
        </div>
        <div style="height: 75px; margin-left: 0px; position: relative; width: 700px; z-index: 10; " id="header_layer">
          <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
          <div id="id2" style="height: 43px; left: 20px; position: absolute; top: 20px; width: 515px; z-index: 1; " class="style_SkipStroke shape-with-text">
            <div class="text-content Normal_External_515_43" style="padding: 0px; ">
              <div class="Normal">
                <div class="paragraph Header" style="padding-bottom: 0pt; padding-top: 0pt; "><div id="id1" style="height: 43px; position: relative; width: 515px; " class="style_SkipStroke shape-with-text inline-block"><div class="text-content Normal_External_515_43" style="padding: 0px; "><div class="Normal"><p style="padding-bottom: 0pt; padding-top: 0pt; " class="Header">Cheetah setup</p></div></div></div></div>
              </div>
              <div style="clear: both; height: 0px; line-height: 0px; " class="tinyText"> </div>
            </div>
          </div>
        </div>
        <div style="margin-left: 0px; position: relative; width: 700px; z-index: 5; " id="body_layer">
          <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
          <div id="id3" style="height: 20px; left: 20px; position: absolute; top: 320px; width: 515px; z-index: 1; " class="style_SkipStroke_1 shape-with-text">
            <div class="text-content Normal_External_515_20" style="padding: 0px; ">
              <div class="Normal">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="paragraph_style">2. Finding the workflow scripts</p>
              </div>
            </div>
          </div>
          


          <div id="id4" style="height: 120px; left: 16px; position: absolute; top: 5px; width: 664px; z-index: 1; " class="style_SkipStroke_2 shape-with-text">
            <div class="text-content graphic_textbox_layout_style_default_External_664_120" style="padding: 0px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-top: 0pt; " class="Free_Form">Cheetah is not omniscient - it is necessary to tell Cheetah about the location and format of data files, detector calibration, and what analysis to perform.  Meanwhile, the need to use third-party frameworks for reading data files in XTC format complicates the setup procedure as Cheetah has work within workflow constraints and computing environments imposed by others.   <br /></p>
                <p class="Free_Form"><br /></p>
                <p style="padding-bottom: 0pt; " class="Free_Form">The easiest way to hide all of this mess is to use scripts to coordinate the data analysis workflow.  Several such scripts can be found in the examples folder.   This page will guide you through the key steps in setting up these scripts for an experiment.</p>
              </div>
            </div>
          </div>
          


          <div id="id5" style="height: 148px; left: 16px; position: absolute; top: 341px; width: 330px; z-index: 1; " class="style_SkipStroke_2 shape-with-text">
            <div class="text-content graphic_textbox_layout_style_default_External_330_148" style="padding: 0px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-top: 0pt; " class="Free_Form">Have a look in the examples folder of the cheetah distribution, where you will find examples of the Cheetah analysis workflow.  These scripts need to be set up once per experiment, so copy these scripts to somewhere related to your analysis project where they can be edited and retained for later use (for example: a scratch or data directory).<br /></p>
                <p style="padding-bottom: 0pt; " class="Free_Form">This page describes the analysis-pipeline-anton, although analysis-pipeline-rick is very similar and uses some of the same scripts. The choice is a matter of preference.</p>
              </div>
            </div>
          </div>
          


          <div style="height: 119px; width: 318px;  height: 119px; left: 355px; position: absolute; top: 345px; width: 318px; z-index: 1; " class="tinyText style_SkipStroke_3">
            <img src="Configuration_files/droppedImage.jpg" alt="" style="border: none; height: 120px; width: 318px; " />
          </div>
          


          <div id="id6" style="height: 20px; left: 20px; position: absolute; top: 537px; width: 515px; z-index: 1; " class="style_SkipStroke_1 shape-with-text">
            <div class="text-content Normal_External_515_20" style="padding: 0px; ">
              <div class="Normal">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="paragraph_style">3. Setting up the workflow scripts</p>
              </div>
            </div>
          </div>
          


          <div id="id7" style="height: 401px; left: 16px; position: absolute; top: 557px; width: 651px; z-index: 1; " class="style_SkipStroke_2 shape-with-text">
            <div class="text-content graphic_textbox_layout_style_default_External_651_401" style="padding: 0px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-top: 0pt; " class="Free_Form">In order to automate execution and hide as much complexity as possible, Cheetah needs to know the following information:<br /></p>
                <ol>
                  <li style="line-height: 14px; padding-left: 18px; text-indent: -8px; " class="full-width">
                    <p style="text-indent: -8px; " class="paragraph_style_1"><span style="font-size: 12px; " class="Bullet">•</span><span style="width: 3px; " class="inline-block"></span>Location of the XTC data files<br /></p>
                  </li>
                  <li style="line-height: 14px; padding-left: 18px; text-indent: -8px; " class="full-width">
                    <p style="text-indent: -8px; " class="paragraph_style_1"><span style="font-size: 12px; " class="Bullet">•</span><span style="width: 3px; " class="inline-block"></span>Where to put the output data files<br /></p>
                  </li>
                  <li style="line-height: 14px; padding-left: 18px; text-indent: -8px; " class="full-width">
                    <p style="text-indent: -8px; " class="paragraph_style_1"><span style="font-size: 12px; " class="Bullet">•</span><span style="width: 3px; " class="inline-block"></span>Where your copy of Cheetah is installed<br /></p>
                  </li>
                  <li style="line-height: 14px; padding-left: 18px; text-indent: -8px; " class="full-width">
                    <p style="text-indent: -8px; " class="paragraph_style_1"><span style="font-size: 12px; " class="Bullet">•</span><span style="width: 3px; " class="inline-block"></span>Where to find the Cheetah and psana configuration files<br /></p>
                  </li>
                  <li style="line-height: 14px; padding-left: 18px; text-indent: -8px; " class="full-width">
                    <p style="text-indent: -8px; " class="paragraph_style_1"><span style="font-size: 12px; " class="Bullet">•</span><span style="width: 3px; " class="inline-block"></span>Which batch queue jobs should be submitted to (if any)<br /></p>
                  </li>
                </ol>
                <p class="Free_Form"><br /></p>
                <p class="Free_Form"><br /></p>
                <p class="paragraph_style_2">3.1 The process script<br /></p>
                <p class="Free_Form">Locate the script called ‘process’.  This script specifies important things such as data locations and calls the more complicated hitfinder script.  The good news is that once everything is working, this is often the only script which needs modifying when changing from one experiment to another.<br /></p>
                <p class="Free_Form"><br /></p>
                <p class="Free_Form">Edit the following configuration variables to match your experiment: <br /></p>
                <ol>
                  <li style="line-height: 14px; padding-left: 18px; text-indent: -8px; " class="full-width">
                    <p style="text-indent: -8px; " class="paragraph_style_1"><span style="font-size: 12px; " class="Bullet">•</span><span style="width: 3px; " class="inline-block"></span>XTCDIR points to the data directory containing XTC data files<br /></p>
                  </li>
                  <li style="line-height: 14px; padding-left: 18px; text-indent: -8px; " class="full-width">
                    <p style="text-indent: -8px; " class="paragraph_style_1"><span style="font-size: 12px; " class="Bullet">•</span><span style="width: 3px; " class="inline-block"></span>H5DIR points to the directory into which Cheetah output will be saved (make sure you have write access and plenty of available space - terabytes of output are not uncommon!)<br /></p>
                  </li>
                  <li style="line-height: 14px; padding-left: 18px; text-indent: -8px; " class="full-width">
                    <p style="text-indent: -8px; " class="paragraph_style_1"><span style="font-size: 12px; " class="Bullet">•</span><span style="width: 3px; " class="inline-block"></span>CONFIGDIR points to the folder containing your process script.  Specifying this as a full path enables this script to be called from other directories. <br /></p>
                  </li>
                  <li style="line-height: 14px; padding-left: 18px; text-indent: -8px; " class="full-width">
                    <p style="text-indent: -8px; " class="paragraph_style_1"><span style="font-size: 12px; " class="Bullet">•</span><span style="width: 3px; " class="inline-block"></span>PSANA points to the location of the psana executable (usually just psana, but can be a fully expanded path).  Use ‘which psana’ to find out which version will be called by default. If in doubt specify a complete path.<br /></p>
                  </li>
                </ol>
                <p class="Free_Form"><br /></p>
                <p class="Free_Form">The HITFINDER and PSANA_CONFIG fields can probably be left alone - they are there in case your cheetah.ini and psana configuration files are in other locations.  Hitfinder itself is a separate script that takes care of finding all XTC files for a given run, creating the data destination directory, putting configuration files in the right location, and calling psana with the appropriate arguments to begin processing.  Hitfinder is probably best left alone for now. <br /></p>
              </div>
            </div>
          </div>
          


          <div id="id8" style="height: 20px; left: 20px; position: absolute; top: 171px; width: 515px; z-index: 1; " class="style_SkipStroke_1 shape-with-text">
            <div class="text-content Normal_External_515_20" style="padding: 0px; ">
              <div class="Normal">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="paragraph_style">1. What the scripts do</p>
              </div>
            </div>
          </div>
          


          <div id="id9" style="height: 92px; left: 16px; position: absolute; top: 191px; width: 660px; z-index: 1; " class="style_SkipStroke_2 shape-with-text">
            <div class="text-content graphic_textbox_layout_style_default_External_660_92" style="padding: 0px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-top: 0pt; " class="Free_Form">The purpose of the workflow scripts is to hide as much execution complexity as possible so that analysis can be started using the single command:<br /></p>
                <p class="Free_Form"><br /></p>
                <p class="Free_Form">    &gt; process &lt;run&gt; &lt;configuration.ini&gt; <br /></p>
                <p class="Free_Form"><br /></p>
                <p style="padding-bottom: 0pt; " class="Free_Form">Achieving this simplicity of course requires a little bit of setup work, which we describe below. </p>
              </div>
            </div>
          </div>
          <div style="height: 958px; line-height: 958px; " class="spacer"> </div>
        </div>
        <div style="height: 3769px; margin-left: 0px; position: relative; width: 700px; z-index: 15; " id="footer_layer">
          <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
          <div id="id10" style="height: 417px; left: 16px; position: absolute; top: 2384px; width: 651px; z-index: 1; " class="style_SkipStroke_2 shape-with-text">
            <div class="text-content graphic_textbox_layout_style_default_External_651_417" style="padding: 0px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-top: 0pt; " class="paragraph_style_2"><span class="style">Note that certain mistakes in the .ini file cause Cheetah to halt with an error.  The most common causes of this are:<br /></span></p>
                <ol>
                  <li style="line-height: 15px; padding-left: 18px; text-indent: -8px; " class="full-width">
                    <p style="text-indent: -8px; " class="paragraph_style_3"><span style="font-size: 12px; position: relative; top: 1px; " class="Bullet">•</span><span style="width: 3px; " class="inline-block"></span><span class="style">An unknown tag name (usually a typo); or <br /></span></p>
                  </li>
                  <li style="line-height: 15px; padding-left: 18px; text-indent: -8px; " class="full-width">
                    <p style="text-indent: -8px; " class="paragraph_style_3"><span style="font-size: 12px; position: relative; top: 1px; " class="Bullet">•</span><span style="width: 3px; " class="inline-block"></span><span class="style">A configuration file that can not be found (eg: requested detector geometry or mask can not be found)<br /></span></p>
                  </li>
                </ol>
                <p class="paragraph_style_2"><span class="style">These errors are reported to the command line so should be relatively easy to identify. <br /></span></p>
                <p class="paragraph_style_2"><span class="style"><br /></span></p>
                <p class="paragraph_style_2"><span class="style"><br /></span></p>
                <p class="paragraph_style_2"><span class="style">Assuming we are working with hitfinding nanocrystal data collected using the cspad detector on the CXI instrument at LCLS, here are some key parameters which must be properly set in order for Cheetah to run.  <br /></span></p>
                <p class="paragraph_style_2"><span class="style"><br /></span></p>
                <p class="paragraph_style_2">geometry=<br /></p>
                <p class="Free_Form">Specify the location to a geometry pixelmap file.  <br /></p>
                <p class="Free_Form">There is an example file located in config/geometry/CxiDs1-geometry.h5.  Cheetah will run without a geometry file (comment out the line with a #) - but image assembly and anything involving radial averages will not work without knowing the detector geometry. <br /></p>
                <p class="Free_Form"><br /></p>
                <p class="paragraph_style_2">darkcal=<br /></p>
                <p class="Free_Form">Specify the location to dark frame calibration of the detector.  <br /></p>
                <p class="Free_Form">There is an example file located in config/darkcal/CxiDs1-darkcal.h5.  Cheetah will run without a darkcal file (comment out the line with a #).  When using local and persistent background subtraction darkcals can be ignored, as both of these background subtraction methods provide their own offset estimation.  However when saving detector raw data a dark calibration is required or else static offsets in detector reading will not be subtracted.  <br /></p>
                <p class="Free_Form"><br /></p>
                <p class="paragraph_style_2">badpixmap=<br /></p>
                <p class="Free_Form">Specify the location to a pixel map specifying known bad pixels on the detector.  <br /></p>
                <p class="Free_Form">For example, with the cspad data pixels at the edge of each ASIC consistently read unreliable values.  Cheetah will run fine without a darkcal file (comment out the line with a #). These pixels are set to zero at the start of analysis.<br /></p>
                <p class="Free_Form"><br /></p>
                <p class="Free_Form"><br /></p>
                <p style="padding-bottom: 0pt; " class="Free_Form">Once all of this is set up, you should see Cheetah start to run as shown below.</p>
              </div>
            </div>
          </div>
          


          <div class="tinyText" style="height: 20px; left: 24px; position: absolute; top: 3749px; width: 644px; z-index: 1; ">
            <img usemap="#map1" id="shapeimage_1" src="Configuration_files/shapeimage_1.png" style="border: none; height: 35px; left: -9px; position: absolute; top: -9px; width: 662px; z-index: 1; " alt="Next" title="" /><map name="map1" id="map1"><area href="Optimisation.html" title="Optimisation.html" onmouseover="IMmouseover('shapeimage_1', '0');" alt="Optimisation.html" onmouseout="IMmouseout('shapeimage_1', '0');" shape="rect" coords="615, 9, 653, 26" /><area href="Optimisation.html" title="Optimisation.html" alt="Optimisation.html" coords="9, 9, 653, 29" /></map><img style="height: 17px; left: 606px; position: absolute; top: 0px; width: 38px; " id="shapeimage_1_link_0" alt="shapeimage_1_link_0" src="Configuration_files/shapeimage_1_link_0.png" />
          </div>
          


          <div style="height: 370px; width: 516px;  height: 370px; left: 92px; position: absolute; top: -2px; width: 516px; z-index: 1; " class="tinyText style_SkipStroke_3">
            <img src="Configuration_files/droppedImage.png" alt="" style="border: none; height: 370px; width: 516px; " />
          </div>
          


          <div id="id11" style="height: 33px; left: 16px; position: absolute; top: 365px; width: 651px; z-index: 1; " class="style_SkipStroke_2 shape-with-text">
            <div class="text-content graphic_textbox_layout_style_default_External_651_33" style="padding: 0px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="Free_Form">Now try executing the process script on some test run.  You should see something like this:</p>
              </div>
            </div>
          </div>
          


          <div id="id12" style="height: 120px; left: 16px; position: absolute; top: 1272px; width: 651px; z-index: 1; " class="style_SkipStroke_2 shape-with-text">
            <div class="text-content graphic_textbox_layout_style_default_External_651_120" style="padding: 0px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-top: 0pt; " class="Free_Form"><br /></p>
              </div>
            </div>
          </div>
          


          <div style="height: 396px; width: 516px;  height: 396px; left: 92px; position: absolute; top: 402px; width: 516px; z-index: 1; " class="tinyText style_SkipStroke_3">
            <img src="Configuration_files/droppedImage_1.png" alt="" style="border: none; height: 396px; width: 516px; " />
          </div>
          


          <div id="id13" style="height: 33px; left: 16px; position: absolute; top: 798px; width: 651px; z-index: 1; " class="style_SkipStroke_2 shape-with-text">
            <div class="text-content graphic_textbox_layout_style_default_External_651_33" style="padding: 0px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="Free_Form">Which after some time will probably fall in a heap with an error similar to the one shown here:</p>
              </div>
            </div>
          </div>
          


          <div style="height: 396px; width: 516px;  height: 396px; left: 92px; position: absolute; top: 830px; width: 516px; z-index: 1; " class="tinyText style_SkipStroke_3">
            <img src="Configuration_files/droppedImage_2.png" alt="" style="border: none; height: 396px; width: 516px; " />
          </div>
          


          <div id="id14" style="height: 50px; left: 24px; position: absolute; top: 1221px; width: 651px; z-index: 1; " class="style_SkipStroke_2 shape-with-text">
            <div class="text-content graphic_textbox_layout_style_default_External_651_50" style="padding: 0px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="Free_Form">Excellent!  Getting this error at this point is actually success because it means that all the files are in the right place and Cheetah is being called without error. The hard part is now over and it is time to set up the cheetah.ini file that configures how Cheetah itself runs.</p>
              </div>
            </div>
          </div>
          


          <div id="id15" style="height: 93px; left: 24px; position: absolute; top: 1280px; width: 651px; z-index: 1; " class="style_SkipStroke_2 shape-with-text">
            <div class="text-content graphic_textbox_layout_style_default_External_651_93" style="padding: 0px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-top: 0pt; " class="paragraph_style_2">3.2 psana.cfg<br /></p>
                <p style="padding-bottom: 0pt; " class="Free_Form">At this point we mention that XTC files must be read through psana, thus there is a chance that the psana.cfg file may also need modification.  This file specifies the Cheetah module to load for processing, as well as which detectors are read into Cheetah.  The detector information in particular may need to be changed for different experiment configurations and different instruments.  Hopefully this file does not need to be modified, but now you know it’s there just in case. </p>
              </div>
            </div>
          </div>
          


          <div style="height: 396px; width: 516px;  height: 396px; left: 92px; position: absolute; top: 1369px; width: 516px; z-index: 1; " class="tinyText style_SkipStroke_3">
            <img src="Configuration_files/droppedImage_3.png" alt="" style="border: none; height: 396px; width: 516px; " />
          </div>
          


          <div id="id16" style="height: 20px; left: 20px; position: absolute; top: 1805px; width: 515px; z-index: 1; " class="style_SkipStroke_1 shape-with-text">
            <div class="text-content Normal_External_515_20" style="padding: 0px; ">
              <div class="Normal">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="paragraph_style">3. Configuring Cheetah</p>
              </div>
            </div>
          </div>
          


          <div id="id17" style="height: 148px; left: 16px; position: absolute; top: 1828px; width: 651px; z-index: 1; " class="style_SkipStroke_2 shape-with-text">
            <div class="text-content graphic_textbox_layout_style_default_External_651_148" style="padding: 0px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-top: 0pt; " class="paragraph_style_2"><span class="style">It is now time to set up what analysis Cheetah should perform.  This is done by editing the cheetah.ini file.  <br /></span></p>
                <p class="paragraph_style_2"><span class="style"><br /></span></p>
                <p class="paragraph_style_2"><span class="style">Creating separate ini files to go with different samples is often a good idea as parameters for different samples may be slightly different (see the section on </span><a title="Optimisation.html" href="Optimisation.html" class="style">optimisation</a><span class="style"> later on).  Using the </span><span class="style_1">process</span><span class="style"> script it is very easy to specify different configurations on the command line. <br /></span></p>
                <p class="paragraph_style_2"><span class="style"><br /></span></p>
                <p style="padding-bottom: 0pt; " class="paragraph_style_2"><span class="style">Locate the sample cheetah.ini file in the analysis-pipeline/process directory, create a copy to work with, and open it in your favourite text editor.  It should look something like this.  All fields are specified in a tag=value format, with ‘#’ at the start of a line denoting a commented out field.   The order of parameters is not important.  In case of duplicate tags, the later tags overrides earlier values. </span></p>
              </div>
            </div>
          </div>
          


          <div style="height: 396px; width: 516px;  height: 396px; left: 84px; position: absolute; top: 1997px; width: 516px; z-index: 1; " class="tinyText style_SkipStroke_3">
            <img src="Configuration_files/droppedImage_4.png" alt="" style="border: none; height: 396px; width: 516px; " />
          </div>
          


          <div style="height: 396px; width: 516px;  height: 396px; left: 80px; position: absolute; top: 2806px; width: 516px; z-index: 1; " class="tinyText style_SkipStroke_3">
            <img src="Configuration_files/droppedImage_5.png" alt="" style="border: none; height: 396px; width: 516px; " />
          </div>
          


          <div id="id18" style="height: 20px; left: 20px; position: absolute; top: 3488px; width: 515px; z-index: 1; " class="style_SkipStroke_1 shape-with-text">
            <div class="text-content Normal_External_515_20" style="padding: 0px; ">
              <div class="Normal">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="paragraph_style">4. Using the batch farm</p>
              </div>
            </div>
          </div>
          


          <div id="id19" style="height: 64px; left: 16px; position: absolute; top: 3511px; width: 651px; z-index: 1; " class="style_SkipStroke_2 shape-with-text">
            <div class="text-content graphic_textbox_layout_style_default_External_651_64" style="padding: 0px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-top: 0pt; " class="paragraph_style_2"><span class="style">Running </span><span class="style_1">Cheetah</span><span class="style"> from the command line is fine for debugging, but rapidly gets tedious once multiple jobs must be processed at once.  To distribute the processing load SLAC has a batch processing queue for use with CXI data.  <br /></span></p>
                <p style="padding-bottom: 0pt; " class="paragraph_style_2"><span class="style">Once everything is debugged, </span><span class="style_1">hitfinder</span><span class="style"> can submit jobs to this batch queue using the ‘-q’ option.  In the process script, simply comment out the second line and uncomment the last line to switch to batch queue operation. </span></p>
              </div>
            </div>
          </div>
          


          <div id="id20" style="height: 20px; left: 20px; position: absolute; top: 3601px; width: 515px; z-index: 1; " class="style_SkipStroke_1 shape-with-text">
            <div class="text-content Normal_External_515_20" style="padding: 0px; ">
              <div class="Normal">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="paragraph_style">5. automatic data processing</p>
              </div>
            </div>
          </div>
          


          <div id="id21" style="height: 92px; left: 16px; position: absolute; top: 3624px; width: 651px; z-index: 1; " class="style_SkipStroke_2 shape-with-text">
            <div class="text-content graphic_textbox_layout_style_default_External_651_92" style="padding: 0px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-top: 0pt; " class="paragraph_style_2"><span class="style">Data can be processed automatically as soon as it is available on the analysis disk system.  <br /></span></p>
                <p class="paragraph_style_2"><span class="style">This is coordinated using the </span><span class="style_1">autorun.pro</span><span class="style"> script.  This script does the following:<br /></span></p>
                <ol>
                  <li style="line-height: 15px; padding-left: 18px; text-indent: -8px; " class="full-width">
                    <p style="text-indent: -8px; " class="paragraph_style_3"><span style="font-size: 12px; position: relative; top: 1px; " class="Bullet">•</span><span style="width: 3px; " class="inline-block"></span><span class="style">Checks the last XTC file that has finished copying (no .inprogress tag);<br /></span></p>
                  </li>
                  <li style="line-height: 15px; padding-left: 18px; text-indent: -8px; " class="full-width">
                    <p style="text-indent: -8px; " class="paragraph_style_3"><span style="font-size: 12px; position: relative; top: 1px; " class="Bullet">•</span><span style="width: 3px; " class="inline-block"></span><span class="style">Checks whether Cheetah is already running on that data set<br /></span></p>
                  </li>
                  <li style="line-height: 15px; padding-left: 18px; text-indent: -8px; " class="full-width">
                    <p style="text-indent: -8px; " class="paragraph_style_3"><span style="font-size: 12px; position: relative; top: 1px; " class="Bullet">•</span><span style="width: 3px; " class="inline-block"></span><span class="style">If not already being processed, starts a hit finder job on the newly available data set<br /></span></p>
                  </li>
                </ol>
                <p style="padding-bottom: 0pt; " class="paragraph_style_2"><span class="style">Have a look at the </span><span class="style_1">autorun.pro</span><span class="style"> script to figure out operation.  This system could probably be refined in the future. </span></p>
              </div>
            </div>
          </div>
          


          <div id="id22" style="height: 33px; left: 16px; position: absolute; top: 3213px; width: 651px; z-index: 1; " class="style_SkipStroke_2 shape-with-text">
            <div class="text-content graphic_textbox_layout_style_default_External_651_33" style="padding: 0px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="paragraph_style_2"><span class="style">Data should also start to appear in the target directory:</span></p>
              </div>
            </div>
          </div>
          


          <div style="height: 188px; width: 516px;  height: 188px; left: 80px; position: absolute; top: 3236px; width: 516px; z-index: 1; " class="tinyText style_SkipStroke_3">
            <img src="Configuration_files/droppedImage_6.png" alt="" style="border: none; height: 188px; width: 516px; " />
          </div>
          


          <div id="id23" style="height: 36px; left: 16px; position: absolute; top: 3422px; width: 651px; z-index: 1; " class="style_SkipStroke_2 shape-with-text">
            <div class="text-content graphic_textbox_layout_style_default_External_651_36" style="padding: 0px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-top: 0pt; " class="paragraph_style_2"><span class="style">Success!<br /></span></p>
                <p style="padding-bottom: 0pt; " class="paragraph_style_2"><span class="style">Now comes the question of </span><a title="Optimisation.html" href="Optimisation.html" class="style">optimising</a><span class="style"> the analysis for your particular data set. </span></p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>


